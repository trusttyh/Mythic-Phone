"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[1778],{71778:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N});var r=n(37951),o=n(11009),a=n(9720),l=n(68272),i=n(10947),c=n(30455),u=n(218),s=n(39950),h=n(51105),f=n(72563),m=n(82657),d=n(20879),p=n(71741),v=n.n(p),y=n(37030),g=n(27059);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(){w=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,l=Object.create(a.prototype),i=new O(r||[]);return o(l,"_invoke",{value:_(t,n,i)}),l}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var f="suspendedStart",m="suspendedYield",d="executing",p="completed",v={};function y(){}function g(){}function x(){}var E={};u(E,l,(function(){return this}));var k=Object.getPrototypeOf,N=k&&k(k(P([])));N&&N!==n&&r.call(N,l)&&(E=N);var L=x.prototype=y.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,l,i){var c=h(t[o],t,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==b(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,l,i)}),(function(t){n("throw",t,l,i)})):e.resolve(s).then((function(t){u.value=t,l(u)}),(function(t){return n("throw",t,l,i)}))}i(c.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function _(e,n,r){var o=f;return function(a,l){if(o===d)throw Error("Generator is already running");if(o===p){if("throw"===a)throw l;return{value:t,done:!0}}for(r.method=a,r.arg=l;;){var i=r.delegate;if(i){var c=C(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=h(e,n,r);if("normal"===u.type){if(o=r.done?p:m,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=p,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var l=a.arg;return l?l.done?(n[e.resultName]=l.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(b(e)+" is not iterable")}return g.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:g,configurable:!0}),g.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},A(S.prototype),u(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var l=new S(s(t,n,r,o),a);return e.isGeneratorFunction(n)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},A(L),u(L,c,"Generator"),u(L,l,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return i.type="throw",i.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],i=l.completion;if("root"===l.tryLoc)return o("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return o(l.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=t,l.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function x(t,e,n,r,o,a,l){try{var i=t[a](l),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var E=(0,f.A)({root:{border:"1px solid rgba(0, 0, 0, .25)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(l.A),k=(0,m.A)((function(t){return{contact:{"&::before":{background:"transparent !important"},background:t.palette.secondary.dark,"&:hover":{background:t.palette.secondary.main,transition:"background ease-in 0.15s",cursor:"pointer"}},paper:{background:t.palette.secondary.dark},expandoContainer:{textAlign:"center",fontSize:30},expandoItem:{"&:hover":{color:t.palette.primary.main,transition:"color ease-in 0.15s"}},avatar:{color:"#fff",height:45,width:45},avatarFav:{color:"#fff",height:45,width:45,border:"2px solid gold"},contactName:{fontSize:18,color:t.palette.text.light},contactNumber:{fontSize:16,color:t.palette.text.main},expanded:{margin:0},missedIcon:{height:16,width:16,color:t.palette.error.main},incomingIcon:{height:16,width:16,color:"#5ec750"},outgoingIcon:{height:16,width:16,color:"#50a2c7"},callDate:{textAlign:"right",fontSize:12}}}));const N=function(t){var e,n,l,f,m,p,b,N,L,A,S,_,C,I,j,O,P,F,G,T,z,U,D=k(),W=(0,a.W6)(),Y=(0,g.MW)(),B=(0,o.d4)((function(t){return t.data.data.contacts})),M=(0,o.d4)((function(t){return t.call.call})),$=((0,o.d4)((function(t){return t.data.data.player})),B.filter((function(e){return e.number===t.call.number}))[0]),q=function(){var e,n=(e=w().mark((function e(){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=M||null!=t&&null!==(n=t.call)&&void 0!==n&&n.limited||null!=t&&null!==(r=t.call)&&void 0!==r&&r.anonymous){e.next=14;break}return e.prev=1,e.next=4,y.A.send("CreateCall",{number:t.call.number,isAnon:!1});case 4:return e.next=6,e.sent.json();case 6:e.sent?W.push("/apps/phone/call/".concat(t.call.number)):Y("Unable To Start Call"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),Y("Unable To Start Call");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(t){x(a,r,o,l,i,"next",t)}function i(t){x(a,r,o,l,i,"throw",t)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return null!=t&&null!==(e=t.call)&&void 0!==e&&e.limited&&null!=t&&null!==(n=t.call)&&void 0!==n&&n.method?null:r.createElement(i.A,{className:D.paper},r.createElement(E,{className:D.contact,expanded:!(t.expanded!=t.index||null!=t&&null!==(l=t.call)&&void 0!==l&&l.limited||null!=t&&null!==(f=t.call)&&void 0!==f&&f.anonymous),onChange:t.onClick},r.createElement(c.A,{expandIcon:null!=t&&null!==(m=t.call)&&void 0!==m&&m.limited||null!=t&&null!==(p=t.call)&&void 0!==p&&p.anonymous?null:r.createElement(d.g,{icon:["fas","chevron-down"]})},r.createElement(u.Ay,{container:!0},r.createElement(u.Ay,{item:!0,xs:2},null!=t&&null!==(b=t.call)&&void 0!==b&&b.limited||null!=t&&null!==(N=t.call)&&void 0!==N&&N.anonymous||null==$||null==$.avatar||""===$.avatar?r.createElement(s.A,{className:null!=t&&null!==(L=t.call)&&void 0!==L&&L.limited||null!=t&&null!==(A=t.call)&&void 0!==A&&A.anonymous||null==$||!$.favorite?D.avatar:D.avatarFav,style:{background:null!=t&&null!==(S=t.call)&&void 0!==S&&S.limited||null!=t&&null!==(_=t.call)&&void 0!==_&&_.anonymous||null==$||!$.color?"#333":$.color}},null!=t&&null!==(C=t.call)&&void 0!==C&&C.limited||null!=t&&null!==(I=t.call)&&void 0!==I&&I.anonymous||null==$?null!=t&&null!==(j=t.call)&&void 0!==j&&j.limited?"?":"#":$.name.charAt(0)):r.createElement(s.A,{className:$.favorite?D.avatarFav:D.avatar,src:$.avatar,alt:$.name.charAt(0)})),r.createElement(u.Ay,{item:!0,xs:10},r.createElement("div",{className:D.contactName},null!=t&&null!==(O=t.call)&&void 0!==O&&O.limited||null!=t&&null!==(P=t.call)&&void 0!==P&&P.anonymous||null==$?"Unknown Caller":$.name),r.createElement(u.Ay,{container:!0,className:D.contactNumber},r.createElement(u.Ay,{item:!0,xs:6},(U=t.call).duration<-1?U.method?r.createElement(d.g,{icon:["fas","phone-arrow-up-right"],className:D.outgoingIcon}):r.createElement(d.g,{icon:["fas","phone-arrow-down-left"],className:D.incomingIcon}):U.method?r.createElement(d.g,{icon:["fas","phone-arrow-up-right"],className:D.missedIcon}):r.createElement(d.g,{icon:["fas","phone-missed"],className:D.missedIcon})," ",null!=t&&null!==(F=t.call)&&void 0!==F&&F.limited||null!=t&&null!==(G=t.call)&&void 0!==G&&G.anonymous?"Unknown Number":t.call.number),r.createElement(u.Ay,{item:!0,xs:6,className:D.callDate},r.createElement(v(),{fromNow:!0},+t.call.time)))))),r.createElement(h.A,null,!(null!=t&&null!==(T=t.call)&&void 0!==T&&T.limited)&&!(null!=t&&null!==(z=t.call)&&void 0!==z&&z.anonymous)&&r.createElement(u.Ay,{container:!0,className:D.expandoContainer},r.createElement(u.Ay,{item:!0,xs:4,className:D.expandoItem,onClick:q},r.createElement(d.g,{icon:"phone"})),r.createElement(u.Ay,{item:!0,xs:4,className:D.expandoItem,onClick:function(){var e,n;null!=t&&null!==(e=t.call)&&void 0!==e&&e.limited||null!=t&&null!==(n=t.call)&&void 0!==n&&n.anonymous||W.push("/apps/messages/convo/".concat(t.call.number))}},r.createElement(d.g,{icon:"comment-sms"})),null!=$?r.createElement(u.Ay,{item:!0,xs:4,onClick:function(){var e,n;null!=t&&null!==(e=t.call)&&void 0!==e&&e.limited||null!=t&&null!==(n=t.call)&&void 0!==n&&n.anonymous||W.push("/apps/contacts/edit/".concat($._id))}},r.createElement(d.g,{icon:"user-pen"})):r.createElement(u.Ay,{item:!0,xs:4,className:D.expandoItem,onClick:function(){var e,n;null!=t&&null!==(e=t.call)&&void 0!==e&&e.limited||null!=t&&null!==(n=t.call)&&void 0!==n&&n.anonymous||W.push("/apps/contacts/add/".concat(t.call.number))}},r.createElement(d.g,{icon:"user-plus"}))))))}}}]);